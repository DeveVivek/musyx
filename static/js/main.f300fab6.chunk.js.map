{"version":3,"sources":["components/spotify.js","components/Login.js","DataLayer.js","components/Header.js","components/SongRow.js","components/Body.js","components/Footer.js","components/SidebarOption.js","components/Sidebar.js","components/Player.js","App.js","serviceWorker.js","index.js","reducer.js"],"names":["redirectUri","window","location","origin","loginUrl","join","Login","className","src","alt","href","DataLayerContext","createContext","DataLayer","initialState","reducer","children","Provider","value","useReducer","useDataLayerValue","useContext","Header","user","placeholder","type","Avatar","images","url","display_name","SongRow","track","play_uri","dispatch","onClick","uri","playing","console","log","album","name","artists","map","artist","Body","spotify","discover_weekly","description","PlayCircleFilled","getMyCurrentPlayingTrack","then","r","item","fontSize","tracks","items","key","Footer","token","useEffect","getMyCurrentPlaybackState","is_playing","uris","styles","bgColor","color","loaderColor","sliderColor","savedColor","trackArtistColor","trackNameColor","loaderSize","sliderHandleColor","play","callback","state","isPlaying","SidebarOption","option","Icon","Sidebar","playlists","HomeOutlinedIcon","SearchIcon","LibraryMusicOutlinedIcon","playlist","id","Player","spotifyOb","SpotifyWebApi","App","hash","substring","split","reduce","initial","parts","decodeURIComponent","_token","access_token","setAccessToken","getMe","getUserPlaylists","getMyTopArtists","response","top_artists","getPlaylist","Boolean","hostname","match","ReactDOM","render","StrictMode","action","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.f300fab6.chunk.js","sourcesContent":["// https://developer.spotify.com/documentation/web-playback-sdk/quick-start/#\nexport const authEndpoint = \"https://accounts.spotify.com/authorize\"\n\nconst redirectUri =window.location.origin + '/'\n\nconst clientId = \"b520e14a69d84d1692b7579b03d3d74d\"\n\nconst scopes = [\n  \"streaming\",\n  \"user-read-currently-playing\",\n  \"user-read-recently-played\",\n  \"user-read-playback-state\",\n  \"user-read-email\",\n  \"user-read-private\",\n  \"user-top-read\",\n  \"user-modify-playback-state\",\n]\n\nexport const getAccessToken = () =>{\n  return window.location.hash\n  .substring(1)//removing the # in the string\n  .split('&')//spliting the access token string from the other post varaibles\n  .reduce((initial,item) => {\n    let parts = item.split('=')\n    initial[parts[0]] = decodeURIComponent(parts[1])\n    return initial\n  },{})\n  \n  /**\n   * reduce() method reduces the array to a single value.\n   * The reduce() method executes a provided function for each value of the array (from left-to-right).\n   * The return value of the function is stored in an accumulator (total/initial).\n   * initial is the initialValue, or the previously returned value of the function\n   * item is the value of the current element\n   * \n   * parts is spiliting the string into before = and after\n   * then initial is set to a single value i.e parts[1]\n   * then reduce() method returns a single value to the getAccessToken variable\n   * \n   * decodeURIComponent()???\n   * \n   */\n}\n\n\n//https://developer.spotify.com/documentation/general/guides/authorization-guide/\nexport const loginUrl = `${authEndpoint}?client_id=${clientId}\n&redirect_uri=${redirectUri}&scope=${scopes.join(\"%20\")}\n&response_type=token&show_dialog=true`","import React from 'react'\nimport './styles/Login.css'\nimport {loginUrl} from \"./spotify\"\n\nfunction Login(){\n    return(\n        <div className=\"login\">\n             <img src=\"https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg\" alt=\"Spotify logo\"></img>\n            <a href={loginUrl}>Login With Spotify</a>\n        </div>\n    )\n}\nexport default Login","import React , {\n    createContext,\n    useContext,\n    useReducer\n} from 'react'\n\nexport const DataLayerContext = createContext() \n\nexport const DataLayer = ({initialState , reducer , children}) => \n    <DataLayerContext.Provider value={useReducer(reducer,initialState)}>\n        {children}\n    </DataLayerContext.Provider>\n//for DataLayer in index.js\n\nexport const useDataLayerValue = () => useContext(DataLayerContext)","import React from 'react'\nimport \"./styles/Header.css\"\nimport SearchIcon from '@material-ui/icons/Search'\nimport { Avatar } from '@material-ui/core'\nimport {useDataLayerValue} from '../DataLayer'\n\nexport const Header = () => {\n    const [{user}] = useDataLayerValue()\n    return(\n        <header>\n            <div className=\"header_left\">\n                <SearchIcon/>\n                <input\n                    placeholder=\"Search for Artists, Songs, or Podcasts \"\n                    type=\"text\"\n                    />\n            </div>\n            <div className=\"header_right\"> \n            <Avatar src={user?.images[0]?.url} alt=\"NP\" />\n                <h4>{user?.display_name} </h4>\n            </div>\n        </header>\n    )\n}","import React from 'react'\nimport { useDataLayerValue } from '../DataLayer'\nimport \"./styles/SongRow.css\"\n\nexport const SongRow = ({track}) => {\n    const [{play_uri},dispatch] = useDataLayerValue()\n   \n    function handleClick(){\n    \n       dispatch(\n            {\n                type:'SET_PLAY_URI',\n                play_uri:track.uri,\n            }\n        )\n        dispatch({\n            type: \"SET_PLAYING\",\n            playing: true,\n          })\n          \n        if (play_uri )\n        console.log(\"üëç\")\n    }\n    \n    return(\n        \n        <div className=\"song_row\" onClick={handleClick} >\n            <img className=\"song_rowAlbum\" src={track.album.images[0].url} alt=\"\"></img>\n            <div className=\"song_rowInfo\">\n                <h1>{track.name}</h1>\n                <p>{track.artists.map((artist) => artist.name ).join(\", \")} -{\" \"}\n                    {track.album.name}\n                </p>\n            </div>\n        </div>\n    )\n}","import React from 'react'\nimport { PlayCircleFilled } from '@material-ui/icons'\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder'\nimport MoreHorizIcon from \"@material-ui/icons/MoreHoriz\"\nimport { useDataLayerValue } from '../DataLayer'\nimport { Header } from './Header'\nimport {SongRow } from './SongRow'\nimport \"./styles/Body.css\"\n\nexport const Body = ({spotify}) => {\n    const [{discover_weekly} , dispatch] = useDataLayerValue()\n    //console.log(discover_weekly)\n    const playPlaylist = () => {\n        dispatch({\n            type: \"SET_PLAYING\",\n            playing: true,\n          })\n          dispatch({\n            type: \"SET_PLAY_URI\",\n            play_uri: \"spotify:playlist:37i9dQZEVXcIdICMRECAXa\",\n          })\n          spotify.getMyCurrentPlayingTrack().then((r) => {\n            dispatch({\n              type: \"SET_ITEM\",\n              item: r.item,\n            })\n          })\n        }\n      \n    return (\n        <div className=\"body\">\n            <Header spotify/>\n            <div className=\"body_info\">\n                <img src={discover_weekly?.images[0].url} alt=\"banner\"></img>\n                <div className=\"body_infoText\">\n                    <strong>PLAYLIST</strong>\n                    <h2>Discover Weekly</h2>\n                    <p>{discover_weekly?.description}</p>\n                </div>\n            \n            </div>\n            <div className=\"body_songs\">\n                <div className=\"body_icons\">\n                    <PlayCircleFilled \n                        className=\"body_shuffle\"\n                        onClick={playPlaylist}\n                    />\n\n                    <FavoriteBorderIcon fontSize=\"large\" />\n                    <MoreHorizIcon/>\n                </div>\n                {discover_weekly?.tracks.items.map(item=> <SongRow key={item.track.name}  track={item.track}/>)}\n            </div>\n        </div>\n    )\n}","import React,{useEffect} from 'react'\nimport \"./styles/Footer.css\"\n/*import PlayCircleOutlineIcon from \"@material-ui/icons/PlayCircleOutline\"\nimport SkipPreviousIcon from \"@material-ui/icons/SkipPrevious\"\nimport SkipNextIcon from \"@material-ui/icons/SkipNext\"\nimport ShuffleIcon from \"@material-ui/icons/Shuffle\"\nimport RepeatIcon from \"@material-ui/icons/Repeat\"\nimport VolumeDownIcon from \"@material-ui/icons/VolumeDown\"\nimport PauseCircleOutlineIcon from \"@material-ui/icons/PauseCircleOutline\"\nimport PlaylistPlayIcon from \"@material-ui/icons/PlaylistPlay\"\nimport { Grid, Slider } from \"@material-ui/core\"*/\nimport { useDataLayerValue } from '../DataLayer'\nimport SpotifyPlayer from 'react-spotify-web-playback'\n//npm i react-spotify-web-playback\n//https://github.com/gilbarbara/react-spotify-web-playback\n\nexport const Footer =({spotify})=>{\n    const [{play_uri, token, playing }, dispatch] = useDataLayerValue()\n\n    let track=null\n    useEffect(() => {\n        spotify.getMyCurrentPlaybackState().then((r) => {\n          console.log(r)\n    \n          dispatch({\n            type: \"SET_PLAYING\",\n            playing: r.is_playing,\n          })\n    \n          dispatch({\n            type: \"SET_ITEM\",\n            item: r.item,\n          })\n        })\n      }, [spotify,dispatch])\n\n     const handleChange = () => {\n        dispatch({\n          type: \"SET_ITEM\",\n          item: track,\n        })\n        if(!track.isPlaying){\n          dispatch({\n            type: \"SET_PLAYING\",\n            playing: track.isPlaying\n          })\n        }\n      }\n\n    /*  const skipNext = () => {\n        spotify.skipToNext()\n        spotify.getMyCurrentPlayingTrack().then((r) => {\n          dispatch({\n            type: \"SET_ITEM\",\n            item: r.item,\n          })\n          dispatch({\n            type: \"SET_PLAYING\",\n            playing: true,\n          })\n        })\n      }\n\n      const skipPrevious = () => {\n        spotify.skipToPrevious()\n        spotify.getMyCurrentPlayingTrack().then((r) => {\n          dispatch({\n            type: \"SET_ITEM\",\n            item: r.item,\n          })\n          dispatch({\n            type: \"SET_PLAYING\",\n            playing: true,\n          })\n        })\n      }*/\n    return(\n        <footer >\n            <div className=\"footer_player_container\">\n            <SpotifyPlayer \n                name='Spotify-clone'\n                token={token}\n                uris={[play_uri]}\n                styles={{\n                    bgColor: ' #282828',\n                    color: '#fff',\n                    loaderColor: '#1DB954',\n                    sliderColor: '#1DB954',\n                    savedColor: '#fff',\n                    trackArtistColor: '#ccc',\n                    trackNameColor: '#fff',\n                    loaderSize:1.5,\n                    sliderHandleColor: \"#fff\"\n                  }}\n                play={playing}\n                callback={(state)=>{\n                    track=state\n                    if (track.isPlaying){\n                      handleChange()\n                    }\n                }}\n                />\n            </div>\n        </footer>\n    )\n}","import React from 'react'\nimport \"./styles/SidebarOption.css\"\n\nexport const SidebarOption = ({option, Icon})=>{\n    return(\n        <div className=\"sidebarOption\">\n            {Icon && <Icon className=\"sidebarOption_icon\"/>}\n            {Icon ?<h4>{option}</h4> :<p>{option}</p>}\n        </div>\n    )\n}","import React from 'react'\nimport { SidebarOption } from './SidebarOption'\nimport \"./styles/Sidebar.css\"\nimport HomeOutlinedIcon from '@material-ui/icons/HomeOutlined'\nimport SearchIcon from \"@material-ui/icons/Search\"\nimport LibraryMusicOutlinedIcon from '@material-ui/icons/LibraryMusicOutlined'\nimport { useDataLayerValue } from '../DataLayer'\n\n\nexport const Sidebar = () => {\n    const [{playlists}] = useDataLayerValue()\n    return(\n        <div className=\"sidebar\">\n            <img className=\"sidebar-logo\" src=\"https://getheavy.com/wp-content/uploads/2019/12/spotify2019-830x350.jpg\" alt=\"spotify-logo\"></img>\n            <SidebarOption option=\"Home\" Icon={HomeOutlinedIcon}/>\n            <SidebarOption option=\"Search\" Icon={SearchIcon}/>\n            <SidebarOption option=\"Your Library\" Icon={LibraryMusicOutlinedIcon}/>\n            <br/>\n            <strong className=\"sidebar_title\">PLAYLISTS</strong>\n            <hr/>\n\n            {playlists?.items?.map(playlist => (\n                <SidebarOption  key={playlist.id} option={playlist.name}/>\n            ))}\n        </div>\n    )\n}","import React from 'react'\nimport { Body } from './Body'\nimport { Footer } from './Footer'\nimport { Sidebar } from './Sidebar'\nimport \"./styles/Player.css\"\n\nconst Player = ({spotify}) => {\n    return(\n        <div className=\"player\">\n            <div className=\"player_body\">\n                <Sidebar/>\n                <Body spotify={spotify}/>\n            </div>\n                <Footer spotify={spotify}/>\n        </div>\n    )\n}\nexport default Player","import React,{ useEffect } from 'react'\nimport './App.css'\nimport Login from './components/Login'\nimport { getAccessToken } from './components/spotify'\nimport SpotifyWebApi from 'spotify-web-api-js'\n//npm i spotify-web-api-js \n//https://github.com/JMPerez/spotify-web-api-js\nimport Player from './components/Player'\nimport {useDataLayerValue} from './DataLayer'\n\n\nconst spotifyOb = new SpotifyWebApi()\n\nfunction App() {\n  //deployed\n    //const [token , setToken] = useState(null)\n    const [{token},dispatch] = useDataLayerValue()\n            //DataLayer.user is destructured in this\n            //state in {} will get everything\n    useEffect(() => {\n      const hash = getAccessToken();\n      window.location.hash=\"\"\n      const _token = hash.access_token\n\n      if (_token){\n\n        dispatch(\n          {\n            type: 'SET_TOKEN',\n            token: _token,\n          }\n        )\n        spotifyOb.setAccessToken(_token) //spotify object from spotify WebApi Wrapper which helps us communicate with Spotify app\n\n        spotifyOb.getMe().then(user => {\n          dispatch(\n            {\n              type: 'SET_USER',\n              user:user,\n            }\n          )\n        })\n        spotifyOb.getUserPlaylists().then((playlists) => {\n          dispatch(\n            {\n              type: 'SET_PLAYLISTS',\n              playlists:playlists,\n            }\n          )\n        })\n      }\n      spotifyOb.getMyTopArtists().then((response) =>\n        dispatch({\n          type: \"SET_TOP_ARTISTS\",\n          top_artists: response,\n        })\n      );\n\n      //enter your own discover weekly playlist id to get your songs\n      spotifyOb.getPlaylist(\"37i9dQZEVXcIdICMRECAXa\").then((response)=>{\n        dispatch(\n          {\n            type: 'SET_DISCOVER_WEEKLY',\n            discover_weekly:response,\n          }\n        )\n      })\n      \n    },[token,dispatch])\n  return (\n      \n    <div className=\"App\">\n      { token ?  <Player spotify={spotifyOb}/> :  <Login/>}\n    </div>\n  )\n\n}\n\nexport default App;\n\n\n//useEffect Hook \n/**\n * It runs a piece of code based on a given condition\n * It runs a function given inside it\n * //we give [] to specify it to run it only once\n * //if we put a variable inside [name,age] the useEffect will run whenever the name var changes.\n */\n\n //Problem: Prop Drilling\n //Solution:Context API","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport {DataLayer} from './DataLayer'//StateProvider\nimport {initialState, reducer} from './reducer'\n\nReactDOM.render(\n  <React.StrictMode>\n    <DataLayer initialState={initialState} reducer={reducer}>\n      {/**\n       * Data Layer for the Context API\n       */}\n      <App />\n    </DataLayer>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","export const initialState = {\n    user:null,\n    playlists:[],\n    discover_weekly: null,\n    top_artists: null,\n    playing:false,\n    item: null,\n    token:null,\n    play_uri:\"spotify:playlist:37i9dQZEVXcIdICMRECAXa\",\n    //enter your own discover weekly uri before production\n}//empty initialState\n\n//https://reactjs.org/docs/hooks-reference.html#usereducer\n//reducer = (state, action) => newState\n\nexport const reducer = (state , action) => {\n    //console.log(action)\n    //Action -> type, [payload]\n    switch(action.type) {\n        case 'SET_USER':\n        //whenever there's a set_user reducer a new state where the user in the initial is set to user\n            return {\n            /**\n             * this syntax is part of ES6 and not React itself and it's used by two operators - the Spread and Rest operators.\n                The Spread operator lets you expand an iterable like a string, object or array into its elements while the Rest operator does the inverse by reducing a set of elemnts into one array.\n             */\n                ...state, \n                user:action.user\n            }\n        case 'SET_TOKEN':\n            return {\n                ...state,\n                token:action.token\n            }\n        case 'SET_PLAYLISTS':\n          return{\n            ...state,\n            playlists:action.playlists,\n           \n          }\n          case 'SET_DISCOVER_WEEKLY':\n            return{\n              ...state,\n              discover_weekly:action.discover_weekly,\n            }\n          case 'SET_TOP_ARTISTS':\n            return{\n              ...state,\n              top_artists:action.top_artists,\n            }\n            case \"SET_PLAYING\":\n              return {\n                ...state,\n                playing: action.playing,\n              }\n        \n            case \"SET_ITEM\":\n              return {\n                ...state,\n                item: action.item,\n              }\n            case \"SET_PLAY_URI\":\n              return{\n                ...state,\n                play_uri:action.play_uri\n              }\n        default:\n            return state //if nothing happens just returns state as it is\n    }\n   \n}\n\n/**\n * this.state = {\n  stateObj: {\n    attr1: '',\n    attr2: '',\n  },\n}\nYou can use the Spread syntax to update the nested state object.\n\nthis.setState(state => ({\n  person: {\n    ...state.stateObj,\n    attr1: 'value1',\n    attr2: 'value2',\n  },\n}))\nThe Rest Ope\n */\n"],"sourceRoot":""}